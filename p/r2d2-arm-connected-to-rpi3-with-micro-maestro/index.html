<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Building R2D2 Arms using RPI3 and Maestro Micro."><title>R2D2 Arm Connected to RPI3 With Micro Maestro</title><link rel=canonical href=https://www.artoo.ai/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/><link rel=stylesheet href=/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css><meta property="og:title" content="R2D2 Arm Connected to RPI3 With Micro Maestro"><meta property="og:description" content="Building R2D2 Arms using RPI3 and Maestro Micro."><meta property="og:url" content="https://www.artoo.ai/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/"><meta property="og:site_name" content="Artoo AI"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="R2D2"><meta property="article:tag" content="RPI3"><meta property="article:tag" content="servo"><meta property="article:tag" content="Maestro"><meta property="article:published_time" content="2019-06-14T12:29:40+06:00"><meta property="article:modified_time" content="2019-06-14T12:29:40+06:00"><meta property="og:image" content="https://www.artoo.ai/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/sch_maestro_sm.png"><meta name=twitter:title content="R2D2 Arm Connected to RPI3 With Micro Maestro"><meta name=twitter:description content="Building R2D2 Arms using RPI3 and Maestro Micro."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.artoo.ai/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/sch_maestro_sm.png"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huab5b541e7bebe9c009dd54bdf4e4708a_16395_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>Artoo AI</a></h1><h2 class=site-description>Artoo AI. Tutorials for creating Artoo [R2D2].</h2></div></header><ol class=social-menu><li><a href=https://github.com/artoo-ai target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://github.com/ricorx7 target=_blank title=GitHub-ricorx7 rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#rpi3>RPI3</a></li><li><a href=#maestro-micro>Maestro Micro</a></li><li><a href=#schematic>Schematic</a></li><li><a href=#rpi3-and-pca9685-running-the-servos>RPI3 and PCA9685 Running the Servos</a></li><li><a href=#rpi3-running-the-servos>RPI3 Running the Servos</a></li><li><a href=#code>Code</a><ol><li><a href=#maestro-library>Maestro Library</a></li><li><a href=#source-code-used>Source Code Used</a></li></ol></li><li><a href=#parts-list>Parts List</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/><img src=/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/sch_maestro_sm_hu0979340a50fc69ccc1de0cfc1e1b05fc_45893_800x0_resize_box_3.png srcset="/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/sch_maestro_sm_hu0979340a50fc69ccc1de0cfc1e1b05fc_45893_800x0_resize_box_3.png 800w, /p/r2d2-arm-connected-to-rpi3-with-micro-maestro/sch_maestro_sm_hu0979340a50fc69ccc1de0cfc1e1b05fc_45893_1600x0_resize_box_3.png 1600w" width=800 height=600 loading=lazy alt="Featured image of post R2D2 Arm Connected to RPI3 With Micro Maestro"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/r2d2-arm-connected-to-rpi3-with-micro-maestro/>R2D2 Arm Connected to RPI3 With Micro Maestro</a></h2><h3 class=article-subtitle>Building R2D2 Arms using RPI3 and Maestro Micro.</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jun 14, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>4 minute read</time></div></footer></div></header><section class=article-content><h2 id=rpi3>RPI3</h2><p>You can use the RPI3 to use the servos. But the servo power will need to separte from the RPI3. The RPI3&rsquo;s 5V is not enough to use servos long term. For initial testing they will work. But what you will find is the servos will glitch if connected to the RPI3&rsquo;s header. The RPI3 causes the glitches. So eventually you need to find an alternative way to run the servos. There are two options I had on hand: a Maestro Mirco and PCA9685.</p><h2 id=maestro-micro>Maestro Micro</h2><p>The Maestro Micro can be used, but it will require a 3.3V to 5V TTL level convert for the serial communication. The Maestro Micro uses 5V TTL logic. The RPI3 uses 3.3V TTL logic. So for the 2 boards to communicate through serial communication, you will need a TTL level converter. I ended up not using this board, because the RPI3 needs power, the Maestro Micro needs power and the TTL Level Convert needs power. This required too many connections versus the PCA9685. And the PCA9685 has 16 channels and I haved used it before in my DonkeyCar.</p><p>I do not plan to persue this board any more. I will stick with the PCA9685 that you can see in my next blog post.</p><h2 id=schematic>Schematic</h2><p><figure><img src=https://rimstar.org/science_electronics_projects/servo_motor_with_raspberry_pi_and_pololu_maestro/circuit_for_servo_with_raspberry_pi_and_maestro_controller.jpg><figcaption><h4>Image From: https://rimstar.org/science_electronics_projects/servo_motor_with_raspberry_pi_and_pololu_maestro.htm</h4></figcaption></figure>Image From: <a class=link href=https://rimstar.org/science_electronics_projects/servo_motor_with_raspberry_pi_and_pololu_maestro.htm target=_blank rel=noopener>https://rimstar.org/science_electronics_projects/servo_motor_with_raspberry_pi_and_pololu_maestro.htm</a></p><h2 id=rpi3-and-pca9685-running-the-servos>RPI3 and PCA9685 Running the Servos</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/Fyyp-IoJuRk allowfullscreen title="YouTube Video"></iframe></div><h2 id=rpi3-running-the-servos>RPI3 Running the Servos</h2><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/q2yWD6PR1Eo allowfullscreen title="YouTube Video"></iframe></div><h2 id=code>Code</h2><h3 id=maestro-library>Maestro Library</h3><p>You will need to download the Maestro library. You can find it on my github for now. You will also need to configure the RPI3 to handle using the serial port. The source code gives the instructions in the comments at the top.</p><p><a class=link href=https://github.com/artoo-ai/R2D2/blob/master/controls/maestro.py target=_blank rel=noopener>https://github.com/artoo-ai/R2D2/blob/master/controls/maestro.py</a></p><h3 id=source-code-used>Source Code Used</h3><p><a class=link href=https://github.com/artoo-ai/R2D2/blob/master/controls/maestro_servo_control.py target=_blank rel=noopener>https://github.com/artoo-ai/R2D2/blob/master/controls/maestro_servo_control.py</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>maestro</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MaestroServoControl</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Use the Maestro board to control the servos.
</span></span></span><span class=line><span class=cl><span class=s2>    1. Disable console serial
</span></span></span><span class=line><span class=cl><span class=s2>    sudo raspi-config select interfacing options -&gt; Serial -&gt; No -&gt; Yes save &amp; exit
</span></span></span><span class=line><span class=cl><span class=s2>    2. Install pyserial
</span></span></span><span class=line><span class=cl><span class=s2>    python -m pip install pyserial (may be a bit slow)
</span></span></span><span class=line><span class=cl><span class=s2>    3. Clone Repo
</span></span></span><span class=line><span class=cl><span class=s2>    git clone https://github.com/FRC4564/Maestro
</span></span></span><span class=line><span class=cl><span class=s2>    4. Disable bluetooth uart
</span></span></span><span class=line><span class=cl><span class=s2>    sudo nano /boot/config.txt
</span></span></span><span class=line><span class=cl><span class=s2>    append to bottom: dtoverlay=pi3-disable-bt
</span></span></span><span class=line><span class=cl><span class=s2>    save
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>comm_port</span><span class=o>=</span><span class=s1>&#39;/dev/ttyACM0&#39;</span><span class=p>,</span> <span class=n>min_servo</span><span class=o>=</span><span class=mf>3000.0</span><span class=p>,</span> <span class=n>max_servo</span><span class=o>=</span><span class=mf>9000.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        Initialize the maestro.  Set the comm port if you need to set the specific.  Set the min
</span></span></span><span class=line><span class=cl><span class=s2>        and max servo pulse width if not default.
</span></span></span><span class=line><span class=cl><span class=s2>        :param comm_port: Comm port of the maestro.
</span></span></span><span class=line><span class=cl><span class=s2>        :param min_servo: Min servo pulse width in quarter seconds.
</span></span></span><span class=line><span class=cl><span class=s2>        :param max_servo: Max servo pulse width in quarter seconds.
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>comm_port</span> <span class=o>=</span> <span class=n>comm_port</span>                              <span class=c1># Serial comm port</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span> <span class=o>=</span> <span class=kc>None</span>                                     <span class=c1># Hold the maestro controller</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>min_servo</span> <span class=o>=</span> <span class=n>min_servo</span>                              <span class=c1># Min pulse width of servo in quarter seconds</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>max_servo</span> <span class=o>=</span> <span class=n>max_servo</span>                              <span class=c1># Max pulse width of servo in quarter seconds</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>setup_controller</span><span class=p>()</span>                                 <span class=c1># Setup maestro</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setup_controller</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        Setup the maestro controller
</span></span></span><span class=line><span class=cl><span class=s2>        :return:
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span> <span class=o>=</span> <span class=n>maestro</span><span class=o>.</span><span class=n>Controller</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>comm_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>setRange</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>min_servo</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_servo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Min Servo: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>getMin</span><span class=p>(</span><span class=mi>0</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Max Servo: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>getMax</span><span class=p>(</span><span class=mi>0</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>shutdown</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        Shutdown the object.  This will properly shutdown everything.
</span></span></span><span class=line><span class=cl><span class=s2>        :return:
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>center</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        Center the servo.
</span></span></span><span class=line><span class=cl><span class=s2>        :return:
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>set_angle</span><span class=p>(</span><span class=mf>0.0</span><span class=p>)</span>  <span class=c1># CENTER (6000)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_angle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>chan</span><span class=p>,</span> <span class=n>angle</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        Set the servo to the given angle.
</span></span></span><span class=line><span class=cl><span class=s2>        :param chan: Servo channel to move
</span></span></span><span class=line><span class=cl><span class=s2>        :param angle: Angle to move the servo
</span></span></span><span class=line><span class=cl><span class=s2>        :return:
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>angle</span> <span class=o>&gt;</span> <span class=mi>180</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>angle</span> <span class=o>=</span> <span class=mi>180</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>angle</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>angle</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>curr_pos</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>getPosition</span><span class=p>(</span><span class=n>chan</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Current Servo Position: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>chan</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34; pw: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>curr_pos</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>pw</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>calc_quater_sec_pulse_width</span><span class=p>(</span><span class=n>angle</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Servo: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>chan</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34; angle: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>angle</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34; pw: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pw</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>setTarget</span><span class=p>(</span><span class=n>chan</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>pw</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>new_pos</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>getPosition</span><span class=p>(</span><span class=n>chan</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;New Servo Position: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>chan</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34; pw: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>new_pos</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calc_quater_sec_pulse_width</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>angle</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        Calculate the pulse width in quarter seconds based off the angle given.
</span></span></span><span class=line><span class=cl><span class=s2>        :param angle:
</span></span></span><span class=line><span class=cl><span class=s2>        :return: Duty cycle for servo based off angle.
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>angle</span> <span class=o>&lt;=</span> <span class=mf>0.0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>min_servo</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>angle</span> <span class=o>&gt;=</span> <span class=mf>180.0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_servo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>max_servo</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>min_servo</span><span class=p>)</span> <span class=o>/</span> <span class=mf>180.0</span> <span class=o>*</span> <span class=n>angle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_speed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>chan</span><span class=p>,</span> <span class=n>speed</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>setSpeed</span><span class=p>(</span><span class=n>chan</span><span class=p>,</span> <span class=n>speed</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_accel</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>chan</span><span class=p>,</span> <span class=n>speed</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>maestro</span><span class=o>.</span><span class=n>setAccel</span><span class=p>(</span><span class=n>chan</span><span class=p>,</span> <span class=n>speed</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1>#servos = MaestroServoControl(comm_port=&#34;/dev/ttyAMA0&#34;)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#servos.set_speed(0, 10)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#servos.set_speed(1, 10)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#servos.set_angle(0, 90.0)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#servos.set_angle(1, 90.0)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#servos.shutdown()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>maestro</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>servo</span> <span class=o>=</span> <span class=n>maestro</span><span class=o>.</span><span class=n>Controller</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>servo</span><span class=o>.</span><span class=n>setAccel</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>  <span class=c1># set servo 0 acceleration to 4</span>
</span></span><span class=line><span class=cl>    <span class=n>servo</span><span class=o>.</span><span class=n>setTarget</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>6000</span><span class=p>)</span>  <span class=c1># set servo to move to center position</span>
</span></span><span class=line><span class=cl>    <span class=n>servo</span><span class=o>.</span><span class=n>setSpeed</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>  <span class=c1># set speed of servo 1</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>=</span> <span class=n>servo</span><span class=o>.</span><span class=n>getPosition</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>  <span class=c1># get the current position of servo 1</span>
</span></span><span class=line><span class=cl>    <span class=n>servo</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=parts-list>Parts List</h2><p>The R2D2 arm holder can be found at <a class=link href=http://astromech.com/ target=_blank rel=noopener>http://astromech.com/</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/r2d2/>R2D2</a>
<a href=/tags/rpi3/>RPI3</a>
<a href=/tags/servo/>servo</a>
<a href=/tags/maestro/>Maestro</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/r2d2-arm-connected-to-rpi3-with-pca9685/><div class=article-image><img src=/p/r2d2-arm-connected-to-rpi3-with-pca9685/sch_pca9685_sm.1af1e9ec13e06da5280d0e133724f2ce_hucd00f0ebc6ede0518264e50e9f01b961_20281_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post R2D2 Arm Connected to RPI3 With PCA9685" data-hash="md5-GvHp7BPgbaUoDQ4TNyTyzg=="></div><div class=article-details><h2 class=article-title>R2D2 Arm Connected to RPI3 With PCA9685</h2></div></a></article><article class=has-image><a href=/p/r2d2-flask-gui/><div class=article-image><img src=/p/r2d2-flask-gui/r2d2_flask_sm.1df672ef7090e7ff056018b33e97df7c_huecb0f4486cddbad7e8839b7ec4541d37_31325_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post R2D2 Flask GUI" data-hash="md5-HfZy73CQ5/8FYBizPpfffA=="></div><div class=article-details><h2 class=article-title>R2D2 Flask GUI</h2></div></a></article><article class=has-image><a href=/p/r2d2-arm-connected-to-rpi3/><div class=article-image><img src=/p/r2d2-arm-connected-to-rpi3/sch.a9e1fedd0b804e1386372fbdfc3c9fa8_hu66c7c2e3d76cecc690a95cac304a8b2d_96517_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post R2D2 Arm Connected to RPI3" data-hash="md5-qeH+3QuAThOGNy+9/DyfqA=="></div><div class=article-details><h2 class=article-title>R2D2 Arm Connected to RPI3</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ricoai.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2019 -
2023 Artoo AI</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>